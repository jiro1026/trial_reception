# 【Trial】大会情報通知Bot
## 動作確認環境（前提条件）
- OS Windows10  
- Python 3.8.9  
- Chorome 101.0.4951.41  

---
## パッケージ構成について

```
reception/
    ├ cs-info/ 取得した大会情報の出力先。JSONファイルが出力されます。
        └ XXXX.json 出力されたJSONファイル。
    ├ lib/ ライブラリフォルダ。
    ├ auto_web.py Web画面実行用モジュール単体でも動作可。
    ├ discord_bot.py DiscordBot制御用モジュール。
    ├ config.ini 定数関連管理用ファイル。
    ├ install_pip.bat ライブラリインストール用バッチ。
    ├ requirements.txt 必要ライブラリを記載。
    └ README.md このファイル。
```
### **auto_web.pyの単体実行について**
以下のコマンドを実行してください。
```bash
cd reception
python auto_web.py
```  
※利用ブラウザはchoromeです。

---
## 事前準備
### **ライブラリの取得**
lib直下に必要なライブラリをインストールするために以下のコマンド実行してください。
```bash
cd reception
install_pip.bat
```
※今回は動作環境の都合上プロジェクトフォルダ内にライブラリフォルダを作ってますが通常のpipでも動作します。  
その場合はソースコードを修正してください。

linux環境の場合はbatファイル内の内容を普通に実行してください。

### **設定ファイルの追記**
`config.ini`のファイル内の以下の項目に関しては自分で設定してください。
```ini
;ログイン認証情報メールアドレス
Mail = ; DMPランキングにログインするためのメールアドレス
;ログイン認証情報パスワード
Password = ; DMPランキングにログインするためのパスワード
Token = ; Discord Botのトークン
```
---

## 注意事項
- リソース管理について  
  DBとか使う気がなかったので大会情報の管理をファイル出力に頼ってます。実行環境でファイル出力等が容易ではない環境の場合は別の手段を検討ください。  
  また、大会情報が割と膨大になるのでメモリ上に展開できる量に限りある場合そのあたりの調整が求められると思います。頑張ってください。  

- seleniumについて  
  Web画面自動実行ライブラリです。テストの自動可等に使われるライブラリなのでそもそもの用途として正しくない気もするので期待通りに動かないこともあります。  
  また、画面要素の指定でcssセレクターを使っている場合があるので対象の画面構成が変わるとまったく動かなくなると思います。
  そのあたりは全部頑張って調整してください。  

---

## その他
処理コメントとかもう少し記載しようと思いましたが、開発してたのがだいぶ前なのであまり覚えていないです。ごめんなさい。  
